<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <title>MrTranslate</title>
</head>
<body>
    <div class="container">
        <div class="container__title">
            <h1>mrTranslate.</h1>
            <p>powered by, Google Translate</p>
        </div>
        <div class="container__translation">
            <div class="container__translation__from">
                <div class="language-selector">
                    <h4>From</h4>
                    <select id="src-lang">
                        <option value="auto">Auto</option>
                    </select>
                </div>
                <textarea placeholder="Enter text to translate..." id="text-to-translate"></textarea>
            </div>
            <div class="container__translation__to">
                <div class="language-selector">
                    <h4>To</h4>
                    <select id="dest-lang">
                    </select>
                </div>
                <p id="translated-text"></p>
            </div>
        </div>
        <button type="button" onclick="get_translation()">Translate</button>
    </div>
</body>
</html>

<script>
    const langs = {
        'af': 'Afrikaans',
        'ga': 'Irish',
        'sq': 'Albanian',
        'it': 'Italian',
        'ar': 'Arabic',	
        'ja': 'Japanese',	
        'az': 'Azerbaijani'	,
        'kn': 'Kannada',
        'eu': 'Basque',	
        'ko': 'Korean',	
        'bn': 'Bengali',	
        'la': 'Latin',	
        'be': 'Belarusian',	
        'lv': 'Latvian',
        'bg': 'Bulgarian',
        'lt': 'Lithuanian',	
        'ca': 'Catalan',	
        'mk': 'Macedonian',
        'zh-CN': 'Chinese Simplified',	
        'ms': 'Malay',	
        'zh-TW': 'Chinese Traditional',	
        'mt': 'Maltese',	
        'hr': 'Croatian',	
        'no': 'Norwegian',	
        'cs': 'Czech',	
        'fa': 'Persian',	
        'da': 'Danish',	
        'pl': 'Polish',	
        'nl': 'Dutch',	
        'pt': 'Portuguese',	
        'en': 'English',	
        'ro': 'Romanian',	
        'eo': 'Esperanto',	
        'ru': 'Russian',	
        'et': 'Estonian',	
        'sr': 'Serbian',	
        'tl': 'Filipino',	
        'sk': 'Slovak',	
        'fi': 'Finnish',	
        'sl': 'Slovenian',	
        'fr': 'French',	
        'es': 'Spanish',	
        'gl': 'Galician',	
        'sw': 'Swahili',	
        'ka': 'Georgian',	
        'sv': 'Swedish',	
        'de': 'German',	
        'ta': 'Tamil',	
        'el': 'Greek',	
        'te': 'Telugu',	
        'gu': 'Gujarati',	
        'th': 'Thai',	
        'ht': 'Haitian Creole', 	
        'tr': 'Turkish',	
        'iw': 'Hebrew',	
        'uk': 'Ukrainian',	
        'hi': 'Hindi',	
        'ur': 'Urdu',	
        'hu': 'Hungarian',	
        'vi': 'Vietnamese',	
        'is': 'Icelandic',	
        'cy': 'Welsh',	
        'id': 'Indonesian',
        'yi': 'Yiddish',
        'nso': 'Northen Sotho'
    }

    let html = '';

    for (key in langs) {
        html += `<option value="${key}">${langs[key]}</option>`
    }

    document.getElementById('dest-lang').innerHTML = html;

    const _fetch = async (uri, { method = 'POST', headers = { 'Content-Type': 'application/json;charset=utf-8' }, body } = {}) => {
        const response = await fetch(uri, { method, headers, body: JSON.stringify(body) });

        return await response.text();
    };

    get_translation = async () => {
        const response = JSON.parse(await _fetch('/translator/translate', {
            body: {
                text: document.getElementById('text-to-translate').value,
                dest: document.getElementById('dest-lang').value
            }
        }))

        document.getElementById('translated-text').innerText = response.text;
    }

</script>